
6TO5 = ./node_modules/.bin/6to5
MOCHA = ./node_modules/.bin/mocha
BROWSERIFY = ./node_modules/.bin/browserify

all: node dist

dist: lib
	@$(BROWSERIFY) -t 6to5ify lib/index.js \
		--standalone xdom \
		--outfile dist/xdom.js

node: lib
	@for path in lib/*; do \
		file=`basename $$path`; \
		$(6TO5) "lib/$$file" > "node/$$file"; \
	done

test:
	@$(MOCHA)

.PHONY: test
